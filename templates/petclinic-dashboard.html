<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">í«í´ë¦¬ë‹‰ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ - í–‰ë³µí•œ ë™ë¬¼ë³‘ì›</title>
    <meta name="description" content="ì‹¤ì œ í«í´ë¦¬ë‹‰ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ê³  ê´€ë¦¬í•˜ëŠ” ëŒ€ì‹œë³´ë“œ">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../assets/css/main.css" rel="stylesheet">
    
    <style>
        .dashboard-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: transform 0.2s ease;
        }
        
        .dashboard-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        
        .stat-card {
            text-align: center;
            padding: 2rem 1rem;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2E8B57;
            display: block;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        
        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status-online {
            background: #d4edda;
            color: #155724;
        }
        
        .status-offline {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status-mock {
            background: #fff3cd;
            color: #856404;
        }
        
        .api-status {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1000;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-weight: 500;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .data-table {
            font-size: 0.9rem;
        }
        
        .data-table th {
            background: #f8f9fa;
            border: none;
            font-weight: 600;
            color: #495057;
        }
        
        .data-table td {
            border: none;
            border-bottom: 1px solid #e9ecef;
            vertical-align: middle;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 1rem 0;
        }
        
        .action-btn {
            padding: 0.375rem 0.75rem;
            border: none;
            border-radius: 6px;
            font-size: 0.8rem;
            margin: 0 0.2rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-edit {
            background: #007bff;
            color: white;
        }
        
        .btn-edit:hover {
            background: #0056b3;
        }
        
        .btn-delete {
            background: #dc3545;
            color: white;
        }
        
        .btn-delete:hover {
            background: #c82333;
        }
        
        .loading-spinner {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        
        .alert-demo {
            border-left: 4px solid #007bff;
            background: #f8f9ff;
        }
        
        .pet-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #e9ecef;
        }
    </style>
</head>
<body>
    <!-- API ì—°ê²° ìƒíƒœ -->
    <div id="api-status" class="api-status">
        <i class="fas fa-circle me-2"></i>
        <span id="api-status-text">ì—°ê²° í™•ì¸ ì¤‘...</span>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container">
                <a class="navbar-brand" href="../index.html">
                    <img id="clinic-logo" src="../assets/images/clinic/logo.png" alt="ë¡œê³ " class="logo">
                    <span id="clinic-name">í–‰ë³µí•œ ë™ë¬¼ë³‘ì›</span>
                </a>
                
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="../index.html">í™ˆ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">ë³‘ì›ì†Œê°œ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="services.html">ì§„ë£Œì•ˆë‚´</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contact.html">ì—°ë½ì²˜</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="demo.html">API ë°ëª¨</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="petclinic-dashboard.html">ëŒ€ì‹œë³´ë“œ</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container py-5">
            <div class="row">
                <div class="col-12">
                    <div class="alert alert-demo" role="alert">
                        <h4 class="alert-heading">
                            <i class="fas fa-chart-line me-2"></i>
                            í«í´ë¦¬ë‹‰ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ
                        </h4>
                        <p class="mb-2">
                            ì‹¤ì œ Spring Boot í«í´ë¦¬ë‹‰ê³¼ ì—°ë™í•˜ì—¬ ë™ë¬¼ë³‘ì› ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ê³  ê´€ë¦¬í•˜ëŠ” ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.
                        </p>
                        <hr>
                        <p class="mb-0">
                            <strong>ğŸ“Š ì‹¤ì‹œê°„ ë°ì´í„°:</strong> ë³´í˜¸ì, ë°˜ë ¤ë™ë¬¼, ìˆ˜ì˜ì‚¬, ì§„ë£Œ ê¸°ë¡ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>

            <!-- í†µê³„ ì¹´ë“œ -->
            <div class="row mb-4">
                <div class="col-md-3 col-sm-6">
                    <div class="dashboard-card stat-card">
                        <i class="fas fa-users fa-2x text-primary mb-3"></i>
                        <span id="total-owners" class="stat-number">-</span>
                        <div class="stat-label">ë“±ë¡ëœ ë³´í˜¸ì</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="dashboard-card stat-card">
                        <i class="fas fa-paw fa-2x text-success mb-3"></i>
                        <span id="total-pets" class="stat-number">-</span>
                        <div class="stat-label">ë“±ë¡ëœ ë°˜ë ¤ë™ë¬¼</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="dashboard-card stat-card">
                        <i class="fas fa-user-md fa-2x text-info mb-3"></i>
                        <span id="total-vets" class="stat-number">-</span>
                        <div class="stat-label">ê·¼ë¬´ ì¤‘ì¸ ìˆ˜ì˜ì‚¬</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="dashboard-card stat-card">
                        <i class="fas fa-calendar-check fa-2x text-warning mb-3"></i>
                        <span id="total-visits" class="stat-number">-</span>
                        <div class="stat-label">ì§„ë£Œ ê¸°ë¡</div>
                    </div>
                </div>
            </div>

            <!-- ì°¨íŠ¸ ì„¹ì…˜ -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="dashboard-card">
                        <h5 class="mb-3">
                            <i class="fas fa-chart-pie me-2"></i>
                            ë°˜ë ¤ë™ë¬¼ ì¢…ë¥˜ë³„ ë¶„í¬
                        </h5>
                        <div class="chart-container">
                            <canvas id="petTypesChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="dashboard-card">
                        <h5 class="mb-3">
                            <i class="fas fa-chart-bar me-2"></i>
                            ì›”ë³„ ì§„ë£Œ ê±´ìˆ˜
                        </h5>
                        <div class="chart-container">
                            <canvas id="monthlyVisitsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë°ì´í„° í…Œì´ë¸” -->
            <div class="row">
                <!-- ìµœê·¼ ë³´í˜¸ì -->
                <div class="col-md-6 mb-4">
                    <div class="dashboard-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="mb-0">
                                <i class="fas fa-users me-2"></i>
                                ìµœê·¼ ë“±ë¡ ë³´í˜¸ì
                            </h5>
                            <button class="btn btn-sm btn-outline-primary" onclick="refreshOwners()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div id="owners-loading" class="loading-spinner">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">ë¡œë”©ì¤‘...</span>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table data-table">
                                <thead>
                                    <tr>
                                        <th>ì´ë¦„</th>
                                        <th>ì—°ë½ì²˜</th>
                                        <th>ì£¼ì†Œ</th>
                                        <th>ê´€ë¦¬</th>
                                    </tr>
                                </thead>
                                <tbody id="owners-table-body">
                                    <!-- ë™ì  ìƒì„± -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ìµœê·¼ ë°˜ë ¤ë™ë¬¼ -->
                <div class="col-md-6 mb-4">
                    <div class="dashboard-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="mb-0">
                                <i class="fas fa-paw me-2"></i>
                                ìµœê·¼ ë“±ë¡ ë°˜ë ¤ë™ë¬¼
                            </h5>
                            <button class="btn btn-sm btn-outline-success" onclick="refreshPets()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div id="pets-loading" class="loading-spinner">
                            <div class="spinner-border text-success" role="status">
                                <span class="visually-hidden">ë¡œë”©ì¤‘...</span>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table data-table">
                                <thead>
                                    <tr>
                                        <th>ì‚¬ì§„</th>
                                        <th>ì´ë¦„</th>
                                        <th>ì¢…ë¥˜</th>
                                        <th>ë‚˜ì´</th>
                                        <th>ê´€ë¦¬</th>
                                    </tr>
                                </thead>
                                <tbody id="pets-table-body">
                                    <!-- ë™ì  ìƒì„± -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ìˆ˜ì˜ì‚¬ ì •ë³´ -->
            <div class="row">
                <div class="col-12">
                    <div class="dashboard-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="mb-0">
                                <i class="fas fa-user-md me-2"></i>
                                ìˆ˜ì˜ì‚¬ ì •ë³´
                            </h5>
                            <button class="btn btn-sm btn-outline-info" onclick="refreshVets()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div id="vets-loading" class="loading-spinner">
                            <div class="spinner-border text-info" role="status">
                                <span class="visually-hidden">ë¡œë”©ì¤‘...</span>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table data-table">
                                <thead>
                                    <tr>
                                        <th>ì´ë¦„</th>
                                        <th>ì „ë¬¸ ë¶„ì•¼</th>
                                        <th>ê·¼ë¬´ ìƒíƒœ</th>
                                        <th>ë“±ë¡ì¼</th>
                                        <th>ê´€ë¦¬</th>
                                    </tr>
                                </thead>
                                <tbody id="vets-table-body">
                                    <!-- ë™ì  ìƒì„± -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="text-center">
                <p>&copy; 2024 <span id="footer-clinic-name">í–‰ë³µí•œ ë™ë¬¼ë³‘ì›</span>. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .</p>
                <p class="text-muted">AWS 3-Tier ì•„í‚¤í…ì²˜ í•™ìŠµìš© í”„ë¡œì íŠ¸</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- API Client -->
    <script src="../assets/js/api-client.js"></script>
    
    <!-- Dashboard Logic -->
    <script>
        let apiClient;
        let petTypesChart;
        let monthlyVisitsChart;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                // API í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
                apiClient = new PetclinicAPIClient();
                await apiClient.loadConfig();
                
                // ì„¤ì • ì ìš©
                await loadSiteConfig();
                
                // ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ
                await initializeDashboard();
                
                // ì°¨íŠ¸ ì´ˆê¸°í™”
                initializeCharts();
                
                // ì£¼ê¸°ì  ì—…ë°ì´íŠ¸ (30ì´ˆë§ˆë‹¤)
                setInterval(updateDashboard, 30000);
                
            } catch (error) {
                console.error('ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜:', error);
                updateAPIStatus('offline', 'ì´ˆê¸°í™” ì‹¤íŒ¨');
            }
        });

        // ì‚¬ì´íŠ¸ ì„¤ì • ë¡œë“œ
        async function loadSiteConfig() {
            try {
                const response = await fetch('../config/clinic-info.json');
                const config = await response.json();
                
                // í´ë¦¬ë‹‰ ì´ë¦„ ì—…ë°ì´íŠ¸
                const clinicName = config.clinic.name;
                document.getElementById('clinic-name').textContent = clinicName;
                document.getElementById('footer-clinic-name').textContent = clinicName;
                document.getElementById('page-title').textContent = `í«í´ë¦¬ë‹‰ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ - ${clinicName}`;
                
            } catch (error) {
                console.error('ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™”
        async function initializeDashboard() {
            try {
                // API ì—°ê²° ìƒíƒœ í™•ì¸
                const isConnected = await apiClient.testConnection();
                
                if (isConnected) {
                    updateAPIStatus('online', 'Spring Boot ì—°ê²°ë¨');
                    await loadRealData();
                } else {
                    updateAPIStatus('mock', 'Mock ë°ì´í„° ì‚¬ìš©');
                    await loadMockData();
                }
                
            } catch (error) {
                console.error('ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                updateAPIStatus('offline', 'ì—°ê²° ì‹¤íŒ¨');
                await loadMockData();
            }
        }

        // ì‹¤ì œ ë°ì´í„° ë¡œë“œ
        async function loadRealData() {
            try {
                // ëª¨ë“  ë°ì´í„° ë³‘ë ¬ ë¡œë“œ
                const [owners, pets, vets] = await Promise.all([
                    apiClient.getOwners(),
                    apiClient.getPets(),
                    apiClient.getVeterinarians()
                ]);

                // í†µê³„ ì—…ë°ì´íŠ¸
                updateStatistics(owners, pets, vets);
                
                // í…Œì´ë¸” ì—…ë°ì´íŠ¸
                updateOwnersTable(owners);
                updatePetsTable(pets);
                updateVetsTable(vets);
                
                // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                updateCharts(pets);
                
            } catch (error) {
                console.error('ì‹¤ì œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                await loadMockData();
            }
        }

        // Mock ë°ì´í„° ë¡œë“œ
        async function loadMockData() {
            const mockOwners = [
                { id: 1, firstName: 'í™', lastName: 'ê¸¸ë™', address: 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬', city: 'ì„œìš¸', telephone: '010-1234-5678' },
                { id: 2, firstName: 'ê¹€', lastName: 'ì˜í¬', address: 'ë¶€ì‚°ì‹œ í•´ìš´ëŒ€êµ¬', city: 'ë¶€ì‚°', telephone: '010-8765-4321' },
                { id: 3, firstName: 'ë°•', lastName: 'ì² ìˆ˜', address: 'ëŒ€êµ¬ì‹œ ìˆ˜ì„±êµ¬', city: 'ëŒ€êµ¬', telephone: '010-5555-6666' }
            ];

            const mockPets = [
                { id: 1, name: 'ë°”ë‘‘ì´', type: { name: 'ê°•ì•„ì§€' }, birthDate: '2020-05-15', owner: { firstName: 'í™', lastName: 'ê¸¸ë™' } },
                { id: 2, name: 'ë‚˜ë¹„', type: { name: 'ê³ ì–‘ì´' }, birthDate: '2019-08-20', owner: { firstName: 'ê¹€', lastName: 'ì˜í¬' } },
                { id: 3, name: 'ì´ˆì½”', type: { name: 'ê°•ì•„ì§€' }, birthDate: '2021-03-10', owner: { firstName: 'ë°•', lastName: 'ì² ìˆ˜' } },
                { id: 4, name: 'ë£¨ë¹„', type: { name: 'ê³ ì–‘ì´' }, birthDate: '2020-12-05', owner: { firstName: 'í™', lastName: 'ê¸¸ë™' } }
            ];

            const mockVets = [
                { id: 1, firstName: 'ê¹€', lastName: 'ìˆ˜ì˜', specialties: [{ name: 'ë‚´ê³¼' }, { name: 'í”¼ë¶€ê³¼' }] },
                { id: 2, firstName: 'ì´', lastName: 'ë™ë¬¼', specialties: [{ name: 'ì™¸ê³¼' }, { name: 'ì •í˜•ì™¸ê³¼' }] },
                { id: 3, firstName: 'ë°•', lastName: 'í«ë‹¥í„°', specialties: [{ name: 'ì¹˜ê³¼' }] }
            ];

            updateStatistics(mockOwners, mockPets, mockVets);
            updateOwnersTable(mockOwners);
            updatePetsTable(mockPets);
            updateVetsTable(mockVets);
            updateCharts(mockPets);
        }

        // API ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateAPIStatus(status, message) {
            const statusElement = document.getElementById('api-status');
            const textElement = document.getElementById('api-status-text');
            
            statusElement.className = `api-status status-${status}`;
            textElement.textContent = message;
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStatistics(owners, pets, vets) {
            document.getElementById('total-owners').textContent = owners.length;
            document.getElementById('total-pets').textContent = pets.length;
            document.getElementById('total-vets').textContent = vets.length;
            document.getElementById('total-visits').textContent = Math.floor(Math.random() * 50) + 20; // Mock ì§„ë£Œ ê¸°ë¡
        }

        // ë³´í˜¸ì í…Œì´ë¸” ì—…ë°ì´íŠ¸
        function updateOwnersTable(owners) {
            const tbody = document.getElementById('owners-table-body');
            tbody.innerHTML = '';
            
            owners.slice(0, 5).forEach(owner => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${owner.firstName} ${owner.lastName}</td>
                    <td>${owner.telephone || 'N/A'}</td>
                    <td>${owner.address || owner.city || 'N/A'}</td>
                    <td>
                        <button class="action-btn btn-edit" onclick="editOwner(${owner.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn btn-delete" onclick="deleteOwner(${owner.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // ë°˜ë ¤ë™ë¬¼ í…Œì´ë¸” ì—…ë°ì´íŠ¸
        function updatePetsTable(pets) {
            const tbody = document.getElementById('pets-table-body');
            tbody.innerHTML = '';
            
            pets.slice(0, 5).forEach(pet => {
                const age = calculateAge(pet.birthDate);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <img src="../assets/images/pets/default-${pet.type?.name === 'ê³ ì–‘ì´' ? 'cat' : 'dog'}.jpg" 
                             alt="${pet.name}" class="pet-avatar"
                             onerror="this.src='../assets/images/pets/default-pet.jpg'">
                    </td>
                    <td>${pet.name}</td>
                    <td>${pet.type?.name || 'Unknown'}</td>
                    <td>${age}</td>
                    <td>
                        <button class="action-btn btn-edit" onclick="editPet(${pet.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn btn-delete" onclick="deletePet(${pet.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // ìˆ˜ì˜ì‚¬ í…Œì´ë¸” ì—…ë°ì´íŠ¸
        function updateVetsTable(vets) {
            const tbody = document.getElementById('vets-table-body');
            tbody.innerHTML = '';
            
            vets.forEach(vet => {
                const specialties = vet.specialties?.map(s => s.name).join(', ') || 'ì¼ë°˜ì§„ë£Œ';
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>Dr. ${vet.firstName} ${vet.lastName}</td>
                    <td>${specialties}</td>
                    <td><span class="status-badge status-online">ê·¼ë¬´ì¤‘</span></td>
                    <td>${new Date().toLocaleDateString()}</td>
                    <td>
                        <button class="action-btn btn-edit" onclick="editVet(${vet.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // ì°¨íŠ¸ ì´ˆê¸°í™”
        function initializeCharts() {
            // ë°˜ë ¤ë™ë¬¼ ì¢…ë¥˜ë³„ íŒŒì´ ì°¨íŠ¸
            const petTypesCtx = document.getElementById('petTypesChart').getContext('2d');
            petTypesChart = new Chart(petTypesCtx, {
                type: 'doughnut',
                data: {
                    labels: ['ê°•ì•„ì§€', 'ê³ ì–‘ì´', 'ê¸°íƒ€'],
                    datasets: [{
                        data: [0, 0, 0],
                        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // ì›”ë³„ ì§„ë£Œ ê±´ìˆ˜ ë°” ì°¨íŠ¸
            const monthlyVisitsCtx = document.getElementById('monthlyVisitsChart').getContext('2d');
            monthlyVisitsChart = new Chart(monthlyVisitsCtx, {
                type: 'bar',
                data: {
                    labels: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”'],
                    datasets: [{
                        label: 'ì§„ë£Œ ê±´ìˆ˜',
                        data: [],
                        backgroundColor: '#2E8B57',
                        borderRadius: 4,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // ì°¨íŠ¸ ë°ì´í„° ì—…ë°ì´íŠ¸
        function updateCharts(pets) {
            // í« ì¢…ë¥˜ë³„ ë°ì´í„° ê³„ì‚°
            const petTypeCounts = pets.reduce((acc, pet) => {
                const type = pet.type?.name || 'ê¸°íƒ€';
                acc[type] = (acc[type] || 0) + 1;
                return acc;
            }, {});

            // íŒŒì´ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            const dogCount = petTypeCounts['ê°•ì•„ì§€'] || 0;
            const catCount = petTypeCounts['ê³ ì–‘ì´'] || 0;
            const otherCount = petTypeCounts['ê¸°íƒ€'] || 0;
            
            petTypesChart.data.datasets[0].data = [dogCount, catCount, otherCount];
            petTypesChart.update();

            // ì›”ë³„ ì§„ë£Œ ê±´ìˆ˜ (Mock ë°ì´í„°)
            const monthlyData = Array.from({length: 6}, () => Math.floor(Math.random() * 30) + 10);
            monthlyVisitsChart.data.datasets[0].data = monthlyData;
            monthlyVisitsChart.update();
        }

        // ë‚˜ì´ ê³„ì‚° í•¨ìˆ˜
        function calculateAge(birthDate) {
            if (!birthDate) return 'N/A';
            const birth = new Date(birthDate);
            const today = new Date();
            const ageInMonths = (today.getFullYear() - birth.getFullYear()) * 12 + (today.getMonth() - birth.getMonth());
            
            if (ageInMonths < 12) {
                return `${ageInMonths}ê°œì›”`;
            } else {
                const years = Math.floor(ageInMonths / 12);
                const months = ageInMonths % 12;
                return months > 0 ? `${years}ë…„ ${months}ê°œì›”` : `${years}ë…„`;
            }
        }

        // ìƒˆë¡œê³ ì¹¨ í•¨ìˆ˜ë“¤
        async function refreshOwners() {
            document.getElementById('owners-loading').style.display = 'block';
            try {
                const owners = await apiClient.getOwners();
                updateOwnersTable(owners);
            } catch (error) {
                console.error('ë³´í˜¸ì ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', error);
            } finally {
                document.getElementById('owners-loading').style.display = 'none';
            }
        }

        async function refreshPets() {
            document.getElementById('pets-loading').style.display = 'block';
            try {
                const pets = await apiClient.getPets();
                updatePetsTable(pets);
                updateCharts(pets);
            } catch (error) {
                console.error('ë°˜ë ¤ë™ë¬¼ ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', error);
            } finally {
                document.getElementById('pets-loading').style.display = 'none';
            }
        }

        async function refreshVets() {
            document.getElementById('vets-loading').style.display = 'block';
            try {
                const vets = await apiClient.getVeterinarians();
                updateVetsTable(vets);
            } catch (error) {
                console.error('ìˆ˜ì˜ì‚¬ ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', error);
            } finally {
                document.getElementById('vets-loading').style.display = 'none';
            }
        }

        // ëŒ€ì‹œë³´ë“œ ì „ì²´ ì—…ë°ì´íŠ¸
        async function updateDashboard() {
            try {
                await initializeDashboard();
            } catch (error) {
                console.error('ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }

        // CRUD ì•¡ì…˜ í•¨ìˆ˜ë“¤ (ë°ëª¨ìš©)
        function editOwner(id) {
            alert(`ë³´í˜¸ì ID ${id} í¸ì§‘ ê¸°ëŠ¥ (êµ¬í˜„ ì˜ˆì •)`);
        }

        function deleteOwner(id) {
            if (confirm('ì •ë§ë¡œ ì´ ë³´í˜¸ìë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                alert(`ë³´í˜¸ì ID ${id} ì‚­ì œ ê¸°ëŠ¥ (êµ¬í˜„ ì˜ˆì •)`);
            }
        }

        function editPet(id) {
            alert(`ë°˜ë ¤ë™ë¬¼ ID ${id} í¸ì§‘ ê¸°ëŠ¥ (êµ¬í˜„ ì˜ˆì •)`);
        }

        function deletePet(id) {
            if (confirm('ì •ë§ë¡œ ì´ ë°˜ë ¤ë™ë¬¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                alert(`ë°˜ë ¤ë™ë¬¼ ID ${id} ì‚­ì œ ê¸°ëŠ¥ (êµ¬í˜„ ì˜ˆì •)`);
            }
        }

        function editVet(id) {
            alert(`ìˆ˜ì˜ì‚¬ ID ${id} í¸ì§‘ ê¸°ëŠ¥ (êµ¬í˜„ ì˜ˆì •)`);
        }
    </script>
</body>
</html>